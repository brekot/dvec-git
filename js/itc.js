var itcParams={time_form:'08:30',time_to:'21:30',phone_mask:'+7 (000) 000-00-00',phone_count:18,fio_count:5,url:'//ccserver.infinity.ru:8443/data/scenario/?ScenarioName=callback',text_success:'Спасибо, менеджеры свяжутся с вами в ближайшее время!',theme:['Адреса и телефоны отделений','Внесение изменений в лицевой счет','Договор энергоснабжения','Дополнительные платные сервисы','Интернет-поддержка'],};$(function(){if(itcParams.time_form&&itcParams.time_to){itcParams.time_form=itcParams.time_form.split(':');itcParams.time_to=itcParams.time_to.split(':');itcParams.time_form[0]=parseInt(itcParams.time_form[0]);itcParams.time_to[0]=parseInt(itcParams.time_to[0]);if(itcParams.time_form[0]<itcParams.time_to[0]){for(var i=itcParams.time_form[0];i<itcParams.time_to[0];i++){if(i<10)str='0'+i+':'+itcParams.time_form[1];else str=i+':'+itcParams.time_form[1];$('#itc-time-from').append('<option value="'+str+'">'+str+'</option>');$('#itc-time-from').selectpicker('refresh')}for(var i=itcParams.time_form[0]+1;i<=itcParams.time_to[0];i++){if(i==itcParams.time_to[0])isSelect='selected';else isSelect='';if(i<10)str='0'+i+':'+itcParams.time_to[1];else str=i+':'+itcParams.time_to[1];$('#itc-time-to').append('<option '+isSelect+' value="'+str+'">'+str+'</option>');$('#itc-time-to').selectpicker('refresh')}}}if(itcParams.theme){itcParams.theme.forEach(function(item,i,arr){$('#itc-theme').append('<option value="'+item+'">'+item+'</option>');$('#itc-theme').selectpicker('refresh')})}if(itcParams.phone_mask){$('#itc-phone').mask(itcParams.phone_mask)}function itcSendForm(){if(!itcParams.phone_count||$('#itc-phone').val().length>=itcParams.phone_count){$('#itc-phone').addClass('is-valid').removeClass('is-invalid')}else{$('#itc-phone').addClass('is-invalid').removeClass('is-valid').focus();return false}if(!itcParams.fio_count||$('#itc-fio').val().length>=itcParams.fio_count){$('#itc-fio').addClass('is-valid').removeClass('is-invalid')}else{$('#itc-fio').addClass('is-invalid').removeClass('is-valid').focus();return false}if($('#itc-sog').prop('checked')){$('#itc-sog').addClass('is-valid').removeClass('is-invalid')}else{$('#itc-sog').addClass('is-invalid').removeClass('is-valid').focus();return false}var itc_time_from=$('#itc-time-from').val();var itc_time_to=$('#itc-time-to').val();var int_time_from=parseInt(itc_time_from.replace(':'+itcParams.time_form[1],''));var int_time_to=parseInt(itc_time_to.replace(':'+itcParams.time_to[1],''));if(int_time_from>=itcParams.time_form[0]&&int_time_to<=itcParams.time_to[0]&&int_time_from<int_time_to){$('#itc-time-from').addClass('is-valid').removeClass('is-invalid');$('#itc-time-to').addClass('is-valid').removeClass('is-invalid');$('#itc-time-from').parent().addClass('is-valid').removeClass('is-invalid');$('#itc-time-to').parent().addClass('is-valid').removeClass('is-invalid')}else{$('#itc-time-from').addClass('is-invalid').removeClass('is-valid').focus();$('#itc-time-to').addClass('is-invalid').removeClass('is-valid');$('#itc-time-from').parent().addClass('is-invalid').removeClass('is-valid');$('#itc-time-to').parent().addClass('is-invalid').removeClass('is-valid');return false}var temp={"Phone":$('#itc-phone').val(),"Name":$('#itc-fio').val(),"Time1":itc_time_from,"Time2":itc_time_to,"Theme":$('#itc-theme').val(),"Email":$('#itc-email').val(),"URL":window.location.href,};$.ajax({url:itcParams.url,type:'POST',data:'{"Result":'+JSON.stringify(temp)+'}',success:function(jsondata){if(jsondata.result.Data==='OK'){$('#itc-form').before('<div class="alert alert-success" id="itc-success">'+itcParams.text_success+'</div>');$('#itc-form').hide();$('#itc-send').hide()}else{alert("Ошибка сервера")}},error:function(jsondata){alert("Ошибка отправки данных")}});return false}$('#itc-send').click(itcSendForm)});